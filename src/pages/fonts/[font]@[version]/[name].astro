---
import Layout from '../../../Layout/Layout.astro';
import type { FontReporter } from '../../../components/fonts/utils';
import { FontDetails } from '../../../page/FontDetails';

const { font, version, name } = Astro.params;
const reporter = await fetch(
    `https://unpkg.com/@chinese-fonts/${font}@${version}/dist/${name}/reporter.json`
).then<FontReporter>((res) => res.json());
const style = `font-family:"${reporter.message.fontFamily}";font-bold:"${reporter.message.fontSubFamily}"`;
---

<Layout canonicalURL={`/fonts/${font}`}>
    <section style={style}>
        <FontDetails
            reporter={reporter}
            packageName={font!}
            version={version!}
            cnName={name!}
            subName={name!}
            client:load
        />
    </section>
    <link
        rel="stylesheet"
        href={`https://unpkg.com/@chinese-fonts/${font}@${version}/dist/${name}/result.css`}
    />
</Layout>
